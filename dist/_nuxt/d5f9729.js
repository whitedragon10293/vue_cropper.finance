(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1279:function(e,t,n){var content=n(1426);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(26).default)("78926dbe",content,!0,{sourceMap:!1})},1422:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return D})),n.d(t,"b",(function(){return F})),n.d(t,"a",(function(){return N}));n(94),n(71),n(50),n(80),n(49),n(77),n(81);var r=n(28),l=n(36),o=n(38),c=n(46),d=n(45),m=n(27),h=n(9),y=(n(40),n(31),n(59),n(64),n(110),n(130),n(41),n(155),n(113),n(405),n(11)),k=n(1236),v=n(1423),f=n(72),S=n(73),M=n.n(S),w=n(3),x=n(4),_=n(19),I=n(5),A=n(587),O=n(169),j=n(120),P=n(0);function C(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw l}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var l=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function D(e,t){return V.apply(this,arguments)}function V(){return(V=Object(h.a)(regeneratorRuntime.mark((function e(t,n){var r,l,o,c,d,m,h,y,k,v,S,I,A,j,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.c)(new w.PublicKey(x.j),new w.PublicKey(n),x.a);case 3:if(r=e.sent.toString(),!f.a.find((function(e){return e.ammId===r}))){e.next=6;break}throw new Error("There is already a pool for this Serum Market");case 6:return l=new w.PublicKey(n),e.next=9,E.load(t,l,void 0,new w.PublicKey(x.q));case 9:o=e.sent,c=o.asksAddress,d=o.bidsAddress,m=o.quoteMint,h=!1,y=0,k=[P.c.USDT,P.c.USDC,P.c.RAY,P.c.WSOL,P.c.SRM];case 13:if(!(y<k.length)){e.next=21;break}if(v=k[y],(null==m?void 0:m.toBase58())!==v.mintAddress){e.next=18;break}return h=!0,e.abrupt("break",21);case 18:y++,e.next=13;break;case 21:if(h){e.next=23;break}throw new Error("Only markets that contain USDC, USDT, SOL, RAY, or SRM as the Quote Token are currently supported.");case 23:return S=[],I=[],e.next=27,Object(_.m)(t,[d,c],_.a);case 27:return e.sent.forEach((function(e){var data=e.account.data,t=O.Orderbook.decode(o,data),n=t.isBids,r=t.slab;if(n){var l,c=C(r.items(!0));try{for(c.s();!(l=c.n()).done;){var d=l.value;I.push((null==o?void 0:o.priceLotsToNumber(d.key.ushrn(64)))||0)}}catch(e){c.e(e)}finally{c.f()}}else{var m,h=C(r.items(!1));try{for(h.s();!(m=h.n()).done;){var y=m.value;S.push((null==o?void 0:o.priceLotsToNumber(y.key.ushrn(64)))||0)}}catch(e){h.e(e)}finally{h.f()}}})),A=S.length>0&&I.length>0?(S[0]+I[0])/2:NaN,e.t0=M.a,e.next=33,Object(_.l)(t,o.baseMintAddress);case 33:return e.t1=e.sent,j=new e.t0(e.t1),e.t2=M.a,e.next=38,Object(_.l)(t,o.quoteMintAddress);case 38:return e.t3=e.sent,T=new e.t2(e.t3),e.abrupt("return",{market:o,price:A,msg:"",baseMintDecimals:j,quoteMintDecimals:T});case 43:if(e.prev=43,e.t4=e.catch(0),"Non-base58 character"!==e.t4.message){e.next=49;break}return e.abrupt("return",{market:null,price:null,msg:"market input error",baseMintDecimals:0,quoteMintDecimals:0});case 49:return e.abrupt("return",{market:null,price:null,msg:e.t4.message,baseMintDecimals:0,quoteMintDecimals:0});case 50:case"end":return e.stop()}}),e,null,[[0,43]])})))).apply(this,arguments)}function F(e,t,n,r,l){return L.apply(this,arguments)}function L(){return(L=Object(h.a)(regeneratorRuntime.mark((function e(t,n,r,l,o){var c,d,m,h,k,v,f,S,M,I,A,O,j,P,C,T,W,D,V,F,L,z,R,K,E,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=new w.Transaction,m=[],h=n.publicKey,e.next=5,Object(_.b)(new w.PublicKey(x.j));case 5:return k=e.sent,v=k.publicKey,f=k.nonce,S=v,e.next=11,Object(_.c)(new w.PublicKey(x.j),r.address,x.a);case 11:return M=e.sent,e.next=14,Object(_.c)(new w.PublicKey(x.j),r.address,x.d);case 14:return I=e.sent,e.next=17,Object(_.c)(new w.PublicKey(x.j),r.address,x.n);case 17:return A=e.sent,e.next=20,Object(_.c)(new w.PublicKey(x.j),r.address,x.k);case 20:return O=e.sent,e.next=23,Object(_.c)(new w.PublicKey(x.j),r.address,x.w);case 23:return j=e.sent,e.next=26,Object(_.c)(new w.PublicKey(x.j),r.address,x.v);case 26:return P=e.sent,e.next=29,Object(_.c)(new w.PublicKey(x.j),r.address,x.y);case 29:return C=e.sent,e.next=32,Object(_.c)(new w.PublicKey(x.j),r.address,x.m);case 32:return T=e.sent,W=!1,D=!1,e.next=37,Object(_.m)(t,[O],_.a);case 37:return(V=e.sent).length>0&&null!==V[0]?(F=y.b.decode(null===(c=V[0])||void 0===c?void 0:c.account.data),0===Object(y.c)(F.supply)?W=!0:D=!0):W=!1,console.log("init flag: ",W,D),d.add(Q(new w.PublicKey(x.j),P,C,S,O,r.baseMintAddress,r.quoteMintAddress,I,A,j,r.address,h,f)),e.next=43,Object(_.d)(O,h,d);case 43:if(L=e.sent,W){e.next=63;break}return e.next=47,Object(_.o)(t,n,d,m);case 47:return z=e.sent,console.log("txid",z),R=0,e.next=52,t.onSignature(z,(function(e,t){R=e.err?-1:1}));case 52:K=(new Date).getTime(),E=!1;case 54:if(E){e.next=61;break}return console.log("txid",E,R,((new Date).getTime()-K)/1e3),0!==R&&(E=!0),e.next=59,new Promise((function(e){return setTimeout(e,1e3)}));case 59:e.next=54;break;case 61:if(1===R){e.next=63;break}throw new Error("create tx1 error");case 63:if(N={ammId:M,ammAuthority:S,poolCoinTokenAccount:I,poolPcTokenAccount:A,lpMintAddress:O,ammOpenOrders:T,ammTargetOrders:P,poolWithdrawQueue:C,poolTempLpTokenAccount:j,destLpToken:L,nonce:f},D){e.next=67;break}return e.next=67,B(t,n,r,new w.PublicKey(x.j),new w.PublicKey(x.q),N,l,o,I,A);case 67:return e.abrupt("return",M.toBase58());case 68:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n,r,l,o,c,d,m,h){return z.apply(this,arguments)}function z(){return(z=Object(h.a)(regeneratorRuntime.mark((function e(t,n,r,l,o,c,d,m,h,v){var f,S,I,A,O,T,W,D,V,F,L,B,z,Q,E,$,Y,U,J,G,H,X,Z,ee,te;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M.a,e.next=3,Object(_.l)(t,r.baseMintAddress);case 3:return e.t1=e.sent,f=new e.t0(e.t1),e.t2=M.a,e.next=8,Object(_.l)(t,r.quoteMintAddress);case 8:return e.t3=e.sent,S=new e.t2(e.t3),I=new M.a(10).exponentiatedBy(f).multipliedBy(d),A=new M.a(10).exponentiatedBy(S).multipliedBy(m),O=new w.Transaction,T=[],W=n.publicKey,e.next=17,Object(_.k)(t,W,r.baseMintAddress);case 17:return D=e.sent,e.next=20,Object(_.k)(t,W,r.quoteMintAddress);case 20:V=e.sent,F=D.value.map((function(e){return e.account.data.parsed.info.tokenAmount.amount>=Object(y.c)(I)?e.pubkey:null})),L=V.value.map((function(e){return e.account.data.parsed.info.tokenAmount.amount>=Object(y.c)(A)?e.pubkey:null})),B=null,z=C(F);try{for(z.s();!(Q=z.n()).done;)null!==(E=Q.value)&&(B=E)}catch(e){z.e(e)}finally{z.f()}$=null,Y=C(L);try{for(Y.s();!(U=Y.n()).done;)null!==(J=U.value)&&($=J)}catch(e){Y.e(e)}finally{Y.f()}if(!(null===B&&r.baseMintAddress.toString()!==P.c.WSOL.mintAddress||null===$&&r.quoteMintAddress.toString()!==P.c.WSOL.mintAddress)){e.next=31;break}throw new Error("no money");case 31:return r.baseMintAddress.toString()===P.c.WSOL.mintAddress?(G=new w.Account,O.add(w.SystemProgram.createAccount({fromPubkey:W,newAccountPubkey:G.publicKey,lamports:parseInt(I.toFixed())+1e7,space:y.a.span,programId:x.x})),O.add(Object(j.initializeAccount)({account:G.publicKey,mint:new w.PublicKey(P.c.WSOL.mintAddress),owner:W})),O.add(Object(k.g)(G.publicKey,h,W,parseInt(I.toFixed()))),O.add(Object(j.closeAccount)({source:G.publicKey,destination:W,owner:W})),T.push(G)):O.add(Object(k.g)(new w.PublicKey(B),h,W,parseInt(I.toFixed()))),r.quoteMintAddress.toString()===P.c.WSOL.mintAddress?(H=new w.Account,O.add(w.SystemProgram.createAccount({fromPubkey:W,newAccountPubkey:H.publicKey,lamports:parseInt(A.toFixed())+1e7,space:y.a.span,programId:x.x})),O.add(Object(j.initializeAccount)({account:H.publicKey,mint:new w.PublicKey(P.c.WSOL.mintAddress),owner:W})),O.add(Object(k.g)(H.publicKey,v,W,parseInt(A.toFixed()))),O.add(Object(j.closeAccount)({source:H.publicKey,destination:W,owner:W})),T.push(H)):O.add(Object(k.g)(new w.PublicKey($),v,W,parseInt(A.toFixed()))),O.add(R(l,c.ammId,c.ammAuthority,c.ammOpenOrders,c.lpMintAddress,r.baseMintAddress,r.quoteMintAddress,c.poolCoinTokenAccount,c.poolPcTokenAccount,c.poolWithdrawQueue,c.destLpToken,c.poolTempLpTokenAccount,o,r.address,W,c.nonce)),O.add(K(l,c.ammId,c.ammAuthority,c.ammOpenOrders,c.poolCoinTokenAccount,c.poolPcTokenAccount,c.ammTargetOrders,o,r.address,r.baseVault,r.quoteVault,r.requestQueue,r.eventQueue,r.bids,r.asks)),e.next=37,Object(_.o)(t,n,O,T);case 37:return X=e.sent,console.log("txid3",X),Z=0,e.next=42,t.onSignature(X,(function(e,t){Z=e.err?-1:1}));case 42:ee=(new Date).getTime(),te=!1;case 44:if(te){e.next=51;break}return console.log("txid3",te,Z,((new Date).getTime()-ee)/1e3),0!==Z&&(te=!0),e.next=49,new Promise((function(e){return setTimeout(e,1e3)}));case 49:e.next=44;break;case 51:if(1===Z){e.next=53;break}throw new Error("Transaction failed");case 53:N();case 54:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(t,n,r,l,o,c,d,m,h,y,k,v,f,S,M,_){var A=Object(I.struct)([Object(I.u8)("instruction"),Object(I.u8)("nonce")]),O=[{pubkey:x.x,isSigner:!1,isWritable:!1},{pubkey:x.u,isSigner:!1,isWritable:!1},{pubkey:w.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!0,isWritable:!0}],data=e.alloc(A.span);return A.encode({instruction:0,nonce:_},data),new w.TransactionInstruction({keys:O,programId:t,data:data})}function K(t,n,r,l,o,c,d,m,h,y,k,v,f,S,M){var _=Object(I.struct)([Object(I.u8)("instruction"),Object(I.u8)("nonce")]),A=[{pubkey:x.x,isSigner:!1,isWritable:!0},{pubkey:w.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0}],data=e.alloc(_.span);return _.encode({instruction:1},data),new w.TransactionInstruction({keys:A,programId:t,data:data})}function Q(t,n,r,l,o,c,d,m,h,y,k,v,f){var S=Object(I.struct)([Object(I.u8)("instruction"),Object(I.u8)("nonce")]),M=[{pubkey:x.x,isSigner:!1,isWritable:!0},{pubkey:x.u,isSigner:!1,isWritable:!0},{pubkey:w.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!0,isWritable:!0}],data=e.alloc(S.span);return S.encode({instruction:10,nonce:f},data),new w.TransactionInstruction({keys:M,programId:t,data:data})}var E=function(e){Object(c.a)(d,e);var t,n=W(d);function d(){var e;return Object(l.a)(this,d),(e=n.apply(this,arguments)).baseVault=null,e.quoteVault=null,e.requestQueue=null,e.eventQueue=null,e.bids=null,e.asks=null,e.baseLotSize=0,e.quoteLotSize=0,e.quoteMint=null,e.baseMint=null,e}return Object(o.a)(d,null,[{key:"load",value:(t=Object(h.a)(regeneratorRuntime.mark((function e(t,address){var n,l,o,c,data,m,h,y,k,f,S,M=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M.length>2&&void 0!==M[2]?M[2]:{},l=M.length>3?M[3]:void 0,e.t0=v.a,e.next=5,t.getAccountInfo(address);case 5:if(e.t1=e.sent,o=(0,e.t0)(e.t1,"Market not found"),c=o.owner,data=o.data,c.equals(l)){e.next=11;break}throw new Error("Address not owned by program: "+c.toBase58());case 11:if((m=this.getLayout(l).decode(data)).accountFlags.initialized&&m.accountFlags.market&&m.ownAddress.equals(address)){e.next=14;break}throw new Error("Invalid market");case 14:return e.next=16,Promise.all([Object(_.l)(t,m.baseMint),Object(_.l)(t,m.quoteMint)]);case 16:return h=e.sent,y=Object(r.a)(h,2),k=y[0],f=y[1],(S=new d(m,k,f,n,l)).decoded=m,S.baseLotSize=m.baseLotSize,S.quoteLotSize=m.quoteLotSize,S.baseVault=m.baseVault,S.quoteVault=m.quoteVault,S.requestQueue=m.requestQueue,S.eventQueue=m.eventQueue,S.bids=m.bids,S.asks=m.asks,S.quoteMint=m.quoteMint,S.baseMint=m.baseMint,e.abrupt("return",S);case 33:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),d}(A.Market);function N(){localStorage.removeItem("poolCoinTokenAccount"),localStorage.removeItem("poolPcTokenAccount"),localStorage.removeItem("lpMintAddress"),localStorage.removeItem("poolTempLpTokenAccount"),localStorage.removeItem("ammId"),localStorage.removeItem("ammOpenOrders"),localStorage.removeItem("ammTargetOrders"),localStorage.removeItem("poolWithdrawQueue"),localStorage.removeItem("destLpToken"),localStorage.removeItem("createMarket")}}).call(this,n(12).Buffer)},1423:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Not found";if(null===e)throw new Error(t);return e}n.d(t,"a",(function(){return r}))},1425:function(e,t,n){"use strict";n(1279)},1426:function(e,t,n){var r=n(25)(!1);r.push([e.i,".create-pool[data-v-366e02a1]{max-width:570px}.create-pool-mobile[data-v-366e02a1]{width:100%}input[data-v-366e02a1]{background:transparent;outline:none;border:none;border-bottom:1px solid #ccc;width:90%;margin:0 5%}.item-title[data-v-366e02a1],.item-title-mobile[data-v-366e02a1]{text-align:left;padding-right:5%}div[data-v-366e02a1]{word-break:break-all;word-wrap:break-word}.item-msg-mobile[data-v-366e02a1]{padding-left:10px}.ant-col[data-v-366e02a1]{margin-bottom:10px}.msgClass div[data-v-366e02a1]{line-height:30px}",""]),e.exports=r},1468:function(e,t,n){"use strict";n.r(t);n(94),n(205);var r=n(48),l=n.n(r),o=(n(634),n(633)),c=n.n(o),d=(n(140),n(87)),m=n.n(d),col=(n(295),n(175)),h=n.n(col),y=(n(296),n(174)),k=n.n(y),v=n(9),f=n(36),S=n(38),M=n(46),w=n(45),x=n(27),_=(n(1269),n(1270)),I=n.n(_),A=n(57),O=(n(40),n(53),n(156),n(95),n(31),n(110),n(405),n(155),n(177),n(130),n(176),n(89),n(37)),j=n(1422),P=n(1424),C=n(0),T=n(19),W=n(3),D=n(4),V=n(11);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(x.a)(e);if(t){var l=Object(x.a)(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return Object(w.a)(this,n)}}var L=function(e,t,n,desc){var r,l=arguments.length,o=l<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(A.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(l<3?r(o):l>3?r(t,n,o):r(t,n))||o);return l>3&&o&&Object.defineProperty(t,n,o),o},B=I.a.Step,z=function(e){Object(M.a)(r,e);var t,n=F(r);function r(){var e;return Object(f.a)(this,r),(e=n.apply(this,arguments)).current=0,e.marketInputFlag=!0,e.marketFlag=!1,e.inputMarket="",e.inputQuoteValue=null,e.inputBaseValue=null,e.inputPrice=null,e.marketMsg=null,e.getMarketLoading=!1,e.marketError=null,e.stepsStatus="process",e.marketStr=null,e.marketPrice=null,e.baseMintDecimals=null,e.quoteMintDecimals=null,e.createAmmFlag=!1,e.stepTitleInputMarket="Import Serum Market ID",e.stepTitleMarketInfo="Price & Initial Liquidity",e.stepTitleInit="Initialize",e.marketTickSize=1,e.userCreateAmmId="",e.liquidityValueChangeFlag=!0,e.userLocalAmmIdList=[],e}return Object(S.a)(r,[{key:"isMobile",get:function(){return this.$accessor.isMobile}},{key:"wallet",get:function(){return this.$accessor.wallet}},{key:"oniIputQuoteValueChanged",value:function(e){var t,n=this;null!==this.inputPrice&&null!==this.baseMintDecimals&&null!==this.quoteMintDecimals&&this.liquidityValueChangeFlag&&(this.liquidityValueChangeFlag=!1,e.toString().split(".").length>1&&e.toString().split(".")[1].length>this.quoteMintDecimals&&(this.inputQuoteValue=parseFloat(parseFloat(e).toFixed(this.quoteMintDecimals))),this.inputBaseValue=Math.floor((null!==(t=this.inputQuoteValue)&&void 0!==t?t:parseFloat(e))/this.inputPrice*Math.pow(10,this.baseMintDecimals))/Math.pow(10,this.baseMintDecimals)),setTimeout((function(){n.liquidityValueChangeFlag=!0}),1)}},{key:"onInputBaseValueChanged",value:function(e){var t,n=this;null!==this.inputPrice&&null!==this.baseMintDecimals&&null!==this.quoteMintDecimals&&this.liquidityValueChangeFlag&&(this.liquidityValueChangeFlag=!1,e.toString().split(".").length>1&&e.toString().split(".")[1].length>this.baseMintDecimals&&(this.inputBaseValue=parseFloat(parseFloat(e).toFixed(this.baseMintDecimals))),this.inputQuoteValue=Math.floor((null!==(t=this.inputBaseValue)&&void 0!==t?t:parseFloat(e))*this.inputPrice*Math.pow(10,this.quoteMintDecimals))/Math.pow(10,this.quoteMintDecimals)),setTimeout((function(){n.liquidityValueChangeFlag=!0}),1)}},{key:"onInputPriceValueChanged",value:function(e){this.inputPrice&&(this.inputBaseValue&&this.quoteMintDecimals?this.inputQuoteValue=Math.floor(e*this.inputPrice*Math.pow(10,this.quoteMintDecimals))/Math.pow(10,this.quoteMintDecimals):this.inputQuoteValue&&this.baseMintDecimals&&(this.inputBaseValue=Math.floor(e/this.inputPrice*Math.pow(10,this.baseMintDecimals))/Math.pow(10,this.baseMintDecimals)))}},{key:"onInputMarketChanged",value:function(e){this.inputMarket=e.replace(/(^\s*)|(\s*$)/g,"")}},{key:"mounted",value:function(){var e=localStorage.getItem("createMarket");null!==e&&e.length>30?(this.inputMarket=e,this.getMarketMsg()):Object(j.a)(),this.updateLocalData()}},{key:"updateLocalData",value:function(){null!==localStorage.getItem("userCreateAMMID")?this.userLocalAmmIdList=localStorage.getItem("userCreateAMMID").split("+++"):this.userLocalAmmIdList=[]}},{key:"getNameForMint",value:function(e){var t=Object.values(C.c).find((function(t){return t.mintAddress===e}));return t?"".concat(t.symbol,": ").concat(e):e}},{key:"getMarketMsg",value:(t=Object(v.a)(regeneratorRuntime.mark((function e(){var t,n,r,l,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getMarketLoading=!0,this.marketInputFlag=!this.marketInputFlag,e.next=4,Object(j.c)(this.$web3,this.inputMarket);case 4:if(t=e.sent,n=t.market,r=t.price,l=t.msg,o=t.baseMintDecimals,c=t.quoteMintDecimals,!this.inputMarket||null===n){e.next=14;break}return e.next=13,Object(T.c)(new W.PublicKey(D.j),new W.PublicKey(this.inputMarket),D.a);case 13:this.expectAmmId=e.sent.toString();case 14:null===n?(this.marketInputFlag=!this.marketInputFlag,this.stepsStatus="error",this.stepTitleInputMarket=l):(this.stepsStatus="process",this.stepTitleInputMarket="Import Serum Market ID",this.current=1,this.marketMsg=n,this.marketPrice=r,this.marketTickSize=Object(V.c)(new P.a(n.tickSize)),this.baseMintDecimals=o,this.quoteMintDecimals=c,this.marketStr=this.inputMarket),this.getMarketLoading=!1;case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"rewriteMarket",value:function(){this.marketInputFlag=!this.marketInputFlag,this.current=0,this.marketMsg=null,this.inputMarket="",this.inputQuoteValue=0,this.inputBaseValue=0,this.inputPrice=0,this.marketError=null,this.createAmmFlag=!1,this.userCreateAmmId="",this.stepTitleMarketInfo="Price & Initial Liquidity",this.stepTitleInit="Initialize",Object(j.a)()}},{key:"createKey",value:function(){var e=this;if(this.stepTitleMarketInfo="Price & Initial Liquidity",this.stepTitleInit="Initialize",null==this.marketMsg||null===this.inputQuoteValue||null===this.inputBaseValue||null===this.inputPrice||this.inputQuoteValue<=0||this.inputBaseValue<=0||this.inputPrice<=0)return this.stepTitleMarketInfo="Please input coin value",void(this.stepsStatus="error");this.stepTitleMarketInfo="Price & Initial Liquidity",this.stepsStatus="process",this.createAmmFlag=!0,Object(j.b)(this.$web3,this.$wallet,this.marketMsg,this.inputBaseValue,this.inputQuoteValue).then(function(){var t=Object(v.a)(regeneratorRuntime.mark((function t(data){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.current=3,e.stepsStatus="process",e.userCreateAmmId=data,null!==localStorage.getItem("userCreateAMMID")?localStorage.setItem("userCreateAMMID",localStorage.getItem("userCreateAMMID")+"+++"):localStorage.setItem("userCreateAMMID",""),localStorage.setItem("userCreateAMMID",localStorage.getItem("userCreateAMMID")+"".concat((new Date).getTime(),"---").concat(data,"---").concat(e.marketMsg.address,"---").concat(e.marketMsg.baseMint.toString(),"---").concat(e.marketMsg.quoteMint.toString())),e.updateLocalData(),e.createAmmFlag=!0,t.next=9,e.$accessor.liquidity.requestInfos();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){throw e.stepsStatus="error",e.current=2,e.createAmmFlag=!1,e.stepTitleInit=t.message,t}))}}]),r}(O.Vue);L([Object(O.Watch)("inputQuoteValue")],z.prototype,"oniIputQuoteValueChanged",null),L([Object(O.Watch)("inputBaseValue")],z.prototype,"onInputBaseValueChanged",null),L([Object(O.Watch)("inputPrice")],z.prototype,"onInputPriceValueChanged",null),L([Object(O.Watch)("inputMarket")],z.prototype,"onInputMarketChanged",null);var R=z=L([Object(O.Component)({head:{title:"CropperFinance Create Pool"},components:{Steps:I.a,Row:k.a,Col:h.a,Button:m.a,Step:B,Tooltip:c.a,Icon:l.a}})],z),K=(n(1425),n(24)),component=Object(K.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",class:e.isMobile?"create-pool-mobile":"create-pool"},[e._m(0),e._v(" "),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body",staticStyle:{"grid-row-gap":"0","row-gap":"0","padding-bottom":"15px"}},[n("Steps",{staticStyle:{width:"auto"},attrs:{current:e.current,size:"small",direction:"vertical",status:e.stepsStatus}},[n("Step",[n("p",{staticStyle:{"word-break":"break-word"},attrs:{slot:"title"},slot:"title"},[e._v("\n            "+e._s(e.stepTitleInputMarket)+"\n            "),n("Tooltip",{attrs:{placement:"right"}},[n("div",{attrs:{slot:"title"},slot:"title"},[e._v("\n                For details on creating a Serum Market, see\n                "),n("a",{attrs:{href:"https://raydium.gitbook.io/raydium/permissionless/creating-a-pool",target:"_blank"}},[e._v("this guide.")])]),e._v(" "),n("Icon",{attrs:{type:"info-circle"}})],1)],1)]),e._v(" "),n("Step",[n("template",{slot:"title"},[e.current>1||1===e.current&&"error"!==e.stepsStatus?n("div",[e._v(e._s(e.stepTitleMarketInfo))]):1===e.current&&"error"===e.stepsStatus?n("div",{staticStyle:{color:"red"}},[e._v("\n              "+e._s(e.stepTitleMarketInfo)+"\n            ")]):n("div",{staticStyle:{color:"rgb(87, 117, 147)"}},[e._v(e._s(e.stepTitleMarketInfo))])])],2),e._v(" "),n("Step",[n("template",{slot:"title"},[e.current>2||2===e.current&&"error"!==e.stepsStatus?n("div",[e._v(e._s(e.stepTitleInit))]):2===e.current&&"error"===e.stepsStatus?n("div",{staticStyle:{color:"red"}},[e._v(e._s(e.stepTitleInit))]):n("div",{staticStyle:{color:"rgb(87, 117, 147)"}},[e._v(e._s(e.stepTitleInit))])])],2),e._v(" "),n("Step",[n("template",{slot:"title"},[e.current>3&&"error"!==e.stepsStatus?n("div",[e._v("Pool Created")]):3===e.current&&"error"===e.stepsStatus?n("div",{staticStyle:{color:"red"}},[e._v("Pool Created")]):n("div",{staticStyle:{color:"rgb(87, 117, 147)"},attrs:{slot:"title"},slot:"title"},[e._v("Pool Created")])])],2)],1),e._v(" "),0===e.current?n("Row",{staticStyle:{"align-items":"baseline","line-height":"40px","padding-bottom":"20px"}},[n("Col",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{"line-height":"20px"},attrs:{span:24}},[n("div",{staticStyle:{"padding-bottom":"10px","word-break":"break-word"}},[e._v("\n            This tool is for advanced users. Before attempting to create a new liquidity pool, we suggest going\n            through this\n            "),n("a",{attrs:{href:"https://raydium.gitbook.io/raydium/permissionless/creating-a-pool",target:"_blank"}},[e._v("\n              detailed guide.")])]),e._v(" "),n("div",[e._v("Input Serum Market ID:")])]),e._v(" "),n("Col",{staticStyle:{"line-height":"20px"},attrs:{span:24}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputMarket,expression:"inputMarket"}],attrs:{disabled:!e.marketInputFlag},domProps:{value:e.inputMarket},on:{input:function(t){t.target.composing||(e.inputMarket=t.target.value)}}})]),e._v(" "),n("Col",{staticStyle:{"padding-bottom":"20px","padding-top":"10px"},attrs:{span:(e.isMobile,24)}},[e.wallet.connected?n("Button",{staticClass:"button_div",staticStyle:{position:"absolute","z-index":"999",width:"100%"},attrs:{size:"large",ghost:"",disabled:!e.wallet.connected,loading:e.getMarketLoading},on:{click:function(t){e.marketInputFlag?e.getMarketMsg():e.rewriteMarket()}}},[e._v("\n            "+e._s(e.wallet.connected?e.getMarketLoading?"":e.marketInputFlag?"Confirm":"Cancel":"Connect")+"\n          ")]):n("Button",{staticStyle:{width:"100%"},attrs:{size:"large",ghost:""},on:{click:e.$accessor.wallet.openModal}},[e._v("\n            Connect\n          ")])],1)],1):e._e(),e._v(" "),e.current>=1?n("div",{staticClass:"msgClass",staticStyle:{"margin-top":"10px"}},[n("Row",[n("Col",{class:e.isMobile?"item-title-mobile":"item-title",attrs:{span:(e.isMobile,24)}},[e._v("Market Info:")]),e._v(" "),n("Col",{attrs:{span:(e.isMobile,24)}},[n("div",{staticStyle:{"padding-left":"10px"}},[n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"100%",display:"inline-block"}},[e._v("\n                Base Token Mint Address:\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-msg-mobile":"",staticStyle:{width:"100%",display:"inline-block","text-align":"right"}},[e._v("\n                "+e._s(e.getNameForMint(e.marketMsg.baseMintAddress.toBase58()))+"\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"100%",display:"inline-block"}},[e._v("\n                Quote Token Mint Address:\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-msg-mobile":"",staticStyle:{width:"100%",display:"inline-block","text-align":"right"}},[e._v("\n                "+e._s(e.getNameForMint(e.marketMsg.quoteMintAddress.toBase58()))+"\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"100%",display:"inline-block"}},[e._v("\n                Expected AMM ID\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-msg-mobile":"",staticStyle:{width:"100%",display:"inline-block","text-align":"right"}},[e._v("\n                "+e._s(e.expectAmmId)+"\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[e._v("\n                Tick Size:\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-msg-mobile":"",staticStyle:{width:"30%",display:"inline-block"}},[e._v("\n                "+e._s(e.marketTickSize)+"\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[e._v("\n                Min Order Size:\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-msg-mobile":"",staticStyle:{width:"30%",display:"inline-block"}},[e._v("\n                "+e._s(e.marketMsg.minOrderSize)+"\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[e._v("\n                Current Price:\n              ")]),e._v(" "),n("div",{class:e.isMobile?"item-msg-mobile":"",staticStyle:{width:"30%",display:"inline-block"}},[e._v("\n                "+e._s(2===e.marketMsg.tickSize.toString().split(".").length?e.marketPrice.toFixed(e.marketMsg.tickSize.toString().split(".")[1].length):parseInt((e.marketPrice/e.marketMsg.tickSize).toFixed(0))*e.marketMsg.tickSize)+"\n              ")])])]),e._v(" "),n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[e._v("\n            Set Base Token Starting Price:\n          ")]),e._v(" "),n("div",{staticStyle:{width:"30%",display:"inline-block"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputPrice,expression:"inputPrice"}],staticStyle:{width:"100%"},attrs:{type:"number",disabled:e.createAmmFlag,step:1,accuracy:"2"},domProps:{value:e.inputPrice},on:{input:function(t){t.target.composing||(e.inputPrice=t.target.value)}}})]),e._v(" "),n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[e._v("\n            Base Token Initial Liquidity:\n          ")]),e._v(" "),n("div",{staticStyle:{width:"30%",display:"inline-block"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputBaseValue,expression:"inputBaseValue"}],staticStyle:{width:"100%"},attrs:{type:"number",disabled:e.createAmmFlag,step:1,accuracy:"2"},domProps:{value:e.inputBaseValue},on:{input:function(t){t.target.composing||(e.inputBaseValue=t.target.value)}}})]),e._v(" "),n("div",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{width:"60%",display:"inline-block"}},[e._v("\n            Quote Token Initial Liquidity:\n          ")]),e._v(" "),n("div",{staticStyle:{width:"30%",display:"inline-block"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputQuoteValue,expression:"inputQuoteValue"}],staticStyle:{width:"100%"},attrs:{type:"number",disabled:e.createAmmFlag,step:1,accuracy:"2"},domProps:{value:e.inputQuoteValue},on:{input:function(t){t.target.composing||(e.inputQuoteValue=t.target.value)}}})]),e._v(" "),n("Col",{staticStyle:{"padding-top":"10px"},attrs:{span:24}},[e.wallet.connected?3==e.current?n("Row",[n("Col",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{span:"24"}},[n("strong",[e._v("Pool has been successfully created!")])]),e._v(" "),n("Col",{staticStyle:{"word-break":"break-word","line-height":"20px"},attrs:{span:"24"}},[e._v("Save the AMM ID below to easily search for this pool on the Swap and Liquidity page.")]),e._v(" "),n("Col",{class:e.isMobile?"item-title-mobile":"item-title",staticStyle:{"margin-top":"10px"},attrs:{span:e.isMobile?24:6}},[e._v("New AMM ID:")]),e._v(" "),n("Col",{staticStyle:{"margin-top":"10px"},attrs:{span:e.isMobile?24:18}},[n("NuxtLink",{attrs:{to:"/liquidity/?ammId="+e.userCreateAmmId}},[e._v(e._s(e.userCreateAmmId))])],1)],1):n("div",{staticStyle:{"text-align":"center","padding-top":"20px"}},[n("Button",{staticClass:"button_div",staticStyle:{"z-index":"999",width:"20%"},attrs:{size:"large",ghost:"",disabled:!e.wallet.connected,loading:e.getMarketLoading},on:{click:function(t){e.marketInputFlag?e.getMarketMsg():e.rewriteMarket()}}},[e._v("\n                "+e._s(e.wallet.connected?e.getMarketLoading?"":e.marketInputFlag?"OK":"Cancel":"Connect")+"\n              ")]),e._v(" "),n("Button",{staticClass:"button_div",staticStyle:{"z-index":"999",width:"70%"},attrs:{size:"large",ghost:"",loading:e.createAmmFlag,disabled:e.createAmmFlag||!(null!==e.inputPrice&&null!==e.inputBaseValue&&null!==e.inputQuoteValue)},on:{click:e.createKey}},[e._v("\n                "+e._s(e.createAmmFlag?"":"Confirm and Initialize Liquidity Pool")+"\n              ")]),e._v(" "),n("p",{staticStyle:{"padding-top":"20px","word-break":"break-word","line-height":"20px",margin:"0"}},[e._v("\n                After clicking 'Confirm' you will need to approve three transactions in your wallet to initialize the\n                pool, create the AMM account, and add liquidity.\n              ")])],1):n("Button",{staticStyle:{position:"absolute","z-index":"999",width:"100%"},attrs:{size:"large",ghost:""},on:{click:e.$accessor.wallet.openModal}},[e._v("\n              Connect\n            ")])],1)],1)],1):e._e()],1)]),e._v(" "),e.userLocalAmmIdList.length>0?n("div",{staticClass:"card",staticStyle:{"margin-top":"20px"}},[n("div",{staticClass:"card-body",staticStyle:{"grid-row-gap":"0","row-gap":"0","padding-bottom":"15px","padding-top":"12px"}},[n("div",{staticStyle:{"font-size":"30px","font-weight":"700"}},[e._v("Your Created Pools")]),e._v(" "),e._l(e.userLocalAmmIdList,(function(t){return[5===t.split("---").length?n("div",{key:t,staticStyle:{margin:"10px 0"}},[n("div",[e._v("AMM ID: "+e._s(t.split("---")[1]))]),e._v(" "),n("div",{staticStyle:{"text-indent":"1em","font-size":"13px"}},[e._v("Serum Market ID: "+e._s(t.split("---")[2]))]),e._v(" "),n("div",{staticStyle:{"text-indent":"1em","font-size":"13px"}},[e._v("Base Token: "+e._s(t.split("---")[3]))]),e._v(" "),n("div",{staticStyle:{"text-indent":"1em","font-size":"13px"}},[e._v("Quote Token: "+e._s(t.split("---")[4]))]),e._v(" "),n("div",{staticStyle:{"text-indent":"1em","font-size":"13px"}},[e._v("\n            Created on: "+e._s(e.$dayjs(parseInt(t.split("---")[0])).toString())+"\n          ")])]):e._e()]}))],2)]):e._e()])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-head fs-container"},[n("span",{staticClass:"title"},[e._v("Create Pool")])])}],!1,null,"366e02a1",null);t.default=component.exports}}]);